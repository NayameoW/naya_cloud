# 数据仓库设计
## 1 业务描述
为了完成总线型设计，本次将挑选作业 1 中关联性较强的的几个业务进行详细说明。
### 1.1 教务处
教务处主要的分析应用业务包括：
- 学生成绩分析：分析学生的考试成绩，统计不同专业、不同班级、不同年级的平均分、最高分和最低分，以及各科目成绩分布情况。
- 教学质量评估：对教师的教学效果进行评估，包括对学生的评价、教师的授课质量、教学方法等方面的统计分析。
- 课程安排分析：分析学生的选课情况，统计不同学院、不同专业、不同年级的选课情况，以及各课程选课人数分布情况。
- 教学计划制定：分析在校学生的成绩情况、毕业学生的就业情况，统计不同学院、不同专业、不同年级的情况。

### 1.2 学生处
学生处主要的分析应用业务包括：
- 学生成绩分析：分析学生的考试成绩，统计不同专业、不同班级、不同年级的平均分、最高分和最低分，以及各科目成绩分布情况。

### 1.3 财务处
财务处主要的分析应用业务包括：
- 财务报表分析：对学校的财务报表进行分析，评估学校的财务状况，并预测未来财务走势。
- 资金管理分析：对学校的资金使用情况进行分析，评估学校的资金管理效率，并对未来的资金需求进行预测。
- 财务风险评估：对学校的财务风险进行评估，并给出风险预警，以防止财务危机的发生。

### 1.4 人事处
- 员工数据分析：人事处需要了解员工数量、结构、流动等情况，以实现员工管理的有效性。
- 工资分析：人事处需要对员工工资数据进行分析，确定工资结构是否合理，以便于决策者制定出有效的薪酬政策。
- 教职工绩效分析：人事处需要分析员工的绩效数据，以实现员工绩效管理的有效性，并对员工进行激励和奖励。由于学校中员工可以细分为教师和职工，因此绩效分析也会有所不同。对教师的评估需要着重于教学质量、科研产出等，而普通职工则类似一般公司中的绩效考核。

## 2 数据仓库维度建模
### 2.1 总线结构设计
使用总线结构设计数据仓库，要求为各个部门设计一致性维度和事实。接下来详细分析公共维度的选择以及给出最终的总线矩阵。

#### 2.1.1 业务过程
从第一部分的业务描述中，可以抽出以下这些关键业务过程：
- 教务处/学生处：成绩分析、教学质量评估、课程安排
	- 教学质量评估通过学生完成评教任务，结果记录在评教事实表当中。
- 财务处：财务报表分析
- 人事处：工资分析
- 
#### 2.1.2 公共维度
根据抽取出的业务过程，我们可以确定公共维度及其属性如下：
- 学生维度：学号（PK）、姓名、性别、联系方式、所属院系（FK）、年级
- 教师维度：职工编号（PK）、姓名、性别、工龄、部门（FK）
- 职工维度：职工编号（PK）、姓名、性别、职称、工龄、所属院系（FK）
- 课程维度：课程编号（PK）、课程名称、开课院系（FK）
- 工资维度：工资编号（PK）、职工编号（FK）、工资金额
- 日期维度：日记关键字（PK）、日期、年月、学期
- 院系维度：院系编号（PK）、名称、位置
- 部门维度：部门编号（PK）、名称、位置

注：一名教师同时拥有教师维度和职工维度，它们的使用场景不同。

#### 2.1.3 总线矩阵
由此我们可以画出如下的总线矩阵：



### 2.2 事实表构建
事实表采用雪花型结构与维度进行关联。

**成绩分析事实表**
对事实表中的维度、度量值进行说明：
- 学号：学生编号，外键关联学生维度表
- 课程编号：学生的该门课程编号，外键关联课程维度表
- 分数：学生取得的分数，0-100 分
- 学期：该门课程所在学期，外键关联学期维度表

![image.png](https://s2.loli.net/2023/02/14/1mB3WadxzOnrfTy.png)

**教学质量评估事实表**
对事实表中的维度、度量值进行说明：
- 教师编号：评教的教师的编号，外键关联教师维度表
- 课程编号：评教的课程编号，外键关联课程维度表
- 评教学期：评教的学期，外键关联学期维度表
- 教学质量评分：对教师教学质量的评分，从 1-10 评分
- 教学态度评分：对教师教学态度的评分，从 1-10 评分
- 教学效果评分：对教师教学效果的评分，从 1-10 评分

 ![image.png](https://s2.loli.net/2023/02/14/yxcnfROHKWe8am2.png)

**财务报表分析事实表**
对事实表中的维度、度量值进行说明：
- 交易单号：标识每次交易的唯一编号，用于索引
- 部门编号：相关部门的编号，外键关联部门维度表
- 金额：每次交易的金额，收入或支出
- 日期关键字：交易日期，外键关联日期维度表

![image.png](https://s2.loli.net/2023/02/14/BZRsnLbIeNpYFAy.png)


**工资分析事实表**

![image.png](https://s2.loli.net/2023/02/14/bdnpU8vWPRyF1L9.png)



## 3 数据映射关系

