# 高德地图集成分析和数据智能应用分析

#### 小组成员



## 1. 应用概述





## 2. 集成调研

### 2.1表示集成



### 2.2 数据集成
#### 2.2.1 概述
在高德地图不同的解决方案中，需要集成各个方面的数据，从而实现其功能。其中最为重要的一个概念就是 POI，即我们通常理解的地点信息。为了更加立体地展示周边环境，POI 数据不仅包含名称、坐标等基础信息，还会展示图片、评论、营业信息等内容，这些统称为深度信息。作为真实世界在线上的映射，其丰富度、准确度、新鲜度对用户出行决策起到了至关重要的作用，时高德地图从各个方面服务大众的基础。为了深度信息的进一步丰富化，高德地图采用多种途径对接采集数据。每个数据接入源称为 CP（Content Provider）。随着接入规模的不断上涨，少量 CP 已经不足以支撑起这个模式，因此高德地图转为使用平台化获取、分析、处理大量的深度信息。

高德地图的第三方数据提供商比较多，以下是其中一些主要的数据提供商：
1. 同道大叔：提供商铺、园区、商圈等信息的POI数据。
2. 大众点评：提供餐饮、酒店、旅游景点等信息的POI数据。
3. 58同城：提供房产、二手车、招聘等信息的POI数据。
4. 飞象网：提供楼盘、商铺、写字楼等信息的POI数据。
5. 安硕信息：提供商业地产、物业管理等领域的POI数据。
6. 搜房网：提供房产、商铺等信息的POI数据。
7. 银联商务：提供银行、ATM 等金融机构的 POI 数据。

高德地图对获得的各种数据进行集成，主要包括以下几个步骤：
1. 数据清洗：高德地图首先对采集到的数据进行清洗，去除无效信息、重复数据等，确保数据的质量和准确性。
2. 数据整合：高德地图将从不同来源获取的数据进行整合，将相同的POI信息合并成一个完整的POI记录，并为每个POI记录分配一个唯一的ID，以便进行管理和查询。
3. 数据标准化：高德地图通过对数据的标准化处理，统一不同数据来源的数据格式和属性，以便进行数据比较和分析。例如，对于商铺类POI，高德地图会对其标准化属性进行定义，如名称、地址、电话、经纬度、行业分类等。
4. 数据更新：高德地图持续对数据进行更新，通过数据更新保证数据的时效性和准确性。
5. 数据挖掘：高德地图还会对POI数据进行挖掘和分析，以提取数据的隐藏信息，发现POI之间的关联关系，从而提供更好的地图服务和推荐服务。

本部分接下来会从高德地图内部的具体实现展示如何对 POI 数据进行集成处理的过程。

#### 2.2.2 数据获取
高德地图获取数据的方式主要有以下几种：
1. 数据采集：高德地图会派遣专门的数据采集团队，通过现场调查、街景采集、无人机等方式收集地理位置数据。采集到的数据经过加工和整理后可以用于高德地图的 POI 数据和地图数据中。
2. 数据合作：高德地图与多家第三方数据提供商建立了数据合作关系，可以获取这些数据提供商提供的POI数据、路网数据等。 
3. 政府公开数据：高德地图还可以通过政府公开数据获取一些公共信息，如行政区划、公共设施等。 
4. 用户上传：高德地图允许用户上传POI数据，这些数据经过审核后可以成为高德地图的POI数据之一。

数据获取能力不仅要支持常见的 HTTP、OSS、ODPS、MTOP、MetaQ 及 Push 服务等多种方式，还要支持组合叠加。比如先从 OSS 狭隘一个文件，解析文件行，根据解析的数据，再调用 HTTP 服务等场景。高德调研了阿里经济体内外的多种解决方案，如 Blink、Stream 平台等，没有发现可以直接满足业务需求的组件。主要问题体现在数据 PM 理解和使用、无法实现松散结构传递和处理、无法支持实时无副作用调试等方面。所以不在上述平台进行二次开发，而是直接基于当前业务场景定制一套引擎。
最终采纳了 PDI 的转换引擎设计思路，直接以原始有向图方式对步骤进行驱动执行，最大限度保持设计直觉和运行时的逻辑一致，从而不需要实现引擎层面的翻译器、优化器、执行器等复杂组件。
![image.png](https://s2.loli.net/2023/02/28/7rNalBQnoZYEvMH.png)

#### 2.2.3 维度对齐
维度对齐需要将不同数据源、不同维度的数据通过给定的业务规则关联整合成某一种维度的数据，比如深度信息业务一般需要整合成 POI 维度的数据。理论上有了引擎提供，能直观表达并堆叠业务的能力可以实现维度对齐的需求。
常规的 ETL 过程中，常常需要解决维度对齐的问题。一般来说，常规业务所涉及的数据整合是针对二维数据表的关联操作。因此，像 PDI 这样的方案通常会采用 SQL 和临时表的方式进行处理。在设计时，输入输出已经被绑定，而调试和运行并没有本质区别。或者在调试时需要修改配置，强制输出到临时存储。这种方式可能会造成转换引擎依赖于特定的外部环境，例如特定的数据库表，从而在调试和运行时造成数据互相污染的问题。POI 数据天然不是二维结构，无法平铺到表中，自然就无法使用这种方案。高德地图最后采用只依赖本机内存+磁盘的方式进行数据处理。平台在 web 端支持几乎所有层次的所见即所得的调试分析功能，覆盖了预转换、转换、清洗、推送等几乎所有环节。

#### 2.2.4 规格映射清洗
![image.png](https://s2.loli.net/2023/03/02/NcPGe8kiIRobKHz.png)

为了支持松散 Schema 映射和透明扩展，转换的行模型创新设计为双容器结构。
- 主数据：承载上游步骤的直接结果数据
- 数据托盘：承载转换参数、步骤变量、映射结果等内容
映射步骤通过映射类型、映射规则和清洗参数支持映射清洗一体化。

### 2.3功能集成



### 2.4业务集成



## 3. 智能数据应用场景



## 参考文献